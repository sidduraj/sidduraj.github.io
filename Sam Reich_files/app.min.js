var Nav=function(){var e,i="home",o=function(){$home.removeClass("open"),$roles.removeClass("open"),$bio.removeClass("open"),$press.removeClass("open")},n=function(){if(console.log(e,i),i!==e){switch($toggleRoles.css("opacity",".5"),$("header a").not(this).css("opacity",".5"),o(),e){case"bio":$bio.addClass("open");break;case"press":$press.addClass("open");break;case"roles":$roles.addClass("open");break;case"projects":$roles.addClass("open")}i=e,$bgOverlay.hasClass("active")||$bgOverlay.addClass("active")}else{switch($toggleRoles.css("opacity","1"),$("header a").css("opacity","1"),$nav.find("li").removeClass("active"),e){case"bio":$bio.removeClass("open");break;case"press":$press.removeClass("open");break;case"roles":$roles.removeClass("open");break;case"projects":$roles.removeClass("open")}i="",$home.addClass("open"),$bgOverlay.removeClass("active")}};$nav.on("click","a",function(i){i.preventDefault(),$toggleRoles.removeClass("active"),$nav.find("li").removeClass("active"),$(this).parent().toggleClass("active"),e=$(this).attr("href"),n()}),$toggleRoles.on("click",".icon-toggle",function(){$toggleRoles.toggleClass("active"),$nav.find("li").removeClass("active"),e="roles",n()})},Bio=function(){var e,i,o=$(".timeline-desc .slide"),n=$(".timeline .slide"),t=0,s=0,l=(o.length-1)*winW,a=winW>=768?20:50,r=n[1].querySelector(".year-dot").getBoundingClientRect().left-n[0].querySelector(".year-dot").getBoundingClientRect().left,c=function(){$.each(o,function(e,i){$(i).css("left",100*e+"%")})},d=function(){$.each(n,function(e,i){$(i).css("left",50+e*a+"%"),e===n.length-1&&(r=n[1].querySelector(".year-dot").getBoundingClientRect().left-n[0].querySelector(".year-dot").getBoundingClientRect().left)})},u=function(){$bio.find(".inner-wrapper").width(winW),$bio.find(".timeline .line").width(o.length*(winW*(a/100))-winW*(a/100)),winW>=768?$(".scroll-helper .text").html("Scroll"):$(".scroll-helper .text").html("Drag")},f=function(){$.each(o,function(o,a){e=a.getBoundingClientRect(),e.left>0&&e.left<winW&&(t=o,i=1-(e.left/winW).toFixed(2),s=r*i,$bio.find(".timeline")[0].scrollLeft=r*(o-1)+s,$(".line .progress").width(r*(o-1)+s),i>.95?$(n[o]).addClass("active"):$(n[o]).removeClass("active")),o>t?$(n[o]).removeClass("active"):t>o&&$(n[o]).addClass("active"),console.log(l,$bio[0].scrollLeft),$bio[0].scrollLeft>=l-100?$(".leap-helper").addClass("inactive"):$(".leap-helper").removeClass("inactive")})};$bio.on("mousewheel",function(e,i){e.preventDefault(),this.scrollLeft-=2*i,this.scrollLeft>150&&$(".scroll-helper").fadeOut()}),$bio.on("scroll",function(e){console.log("scroll"),l=(o.length-1)*winW,f()}),$(".timeline .slide").on("click",function(){t=$(this).index(),$bio.animate({scrollLeft:winW*t},600,"easeOutQuart"),$bio.find(".timeline").animate({scrollLeft:r*t},600,"easeInOutQuart"),$(".line .progress").animate({width:r*t},600,"easeInOutQuart",function(){$.each(n,function(e,i){e>t?$(i).removeClass("active"):$(i).addClass("active")}),$(n[t]).addClass("active")})}),$(".leap-helper").on("click",function(){$bio.animate({scrollLeft:(o.length-1)*winW},600,"easeInOutQuart")}),this.resized=function(){u(),c(),d(),a=winW>=768?20:50,r=n[1].querySelector(".year-dot").getBoundingClientRect().left-n[0].querySelector(".year-dot").getBoundingClientRect().left},this.init=function(){u(),c(),d()}},Home=function(){var e=function(){setTimeout(function(){$home.find("h1").addClass("animated"),setTimeout(function(){$home.find("h2").addClass("animated")},300)},300)};this.init=function(){e()}},Press=function(){var e=function(){$press.find(".inner-wrapper").width(winW)};this.resized=function(){e()},this.init=function(){e()}},Roles=function(){var e=function(){$roles.find(".inner-wrapper").height(winH)};this.resized=function(){e()},this.init=function(){e()}},winW=$(window).width(),winH=$(window).height(),$nav=$(".main-nav"),$toggleRoles=$(".toggle-roles"),$bgOverlay=$(".bg-overlay"),$home=$(".home-wrap"),$roles=$(".roles-wrap"),$bio=$(".bio-wrap"),$press=$(".press-wrap"),navModule=new Nav,homeModule=new Home,bioModule=new Bio,pressModule=new Press,rolesModule=new Roles;$(window).on("resize",function(){winW=$(window).width(),winH=$(window).height(),bioModule.resized(),pressModule.resized(),rolesModule.resized()}),$(document).on("ready",function(){homeModule.init(),bioModule.init(),pressModule.init(),rolesModule.init()});